(PROGRAM (NAME runme)
	(REC_DECL (NAME("Complex") 
		(PARAMFIELD_DECL (NAME("Real") TYPE(FLOAT)))
		(PARAMFIELD_DECL (NAME("Imag") TYPE(FLOAT)))
	))
	(VAR_DECL (NAME("dummy") TYPE(Complex) NULL))
	(PROC_DECL (NAME("Add") 
		(PARAMFIELD_DECL (NAME("a") TYPE(Complex)))
		(PARAMFIELD_DECL (NAME("b") TYPE(Complex))) TYPE(Complex) 
		(VAR_DECL (NAME("retval") TYPE(Complex) NULL))

		(ASSIGN_STMT (VAR (NAME("retval"))) (NEW_EXP (NAME("Complex"))))
		(ASSIGN_STMT (VAR ((VAR (NAME("retval"))) NAME("Real"))) (BINARY_EXP ((VAR ((VAR (NAME("a"))) NAME("Real"))) + (VAR ((VAR (NAME("b"))) NAME("Real"))))))
		(ASSIGN_STMT (VAR ((VAR (NAME("retval"))) NAME("Imag"))) (BINARY_EXP ((VAR ((VAR (NAME("a"))) NAME("Imag"))) + (VAR ((VAR (NAME("b"))) NAME("Imag"))))))
		(RETURN_STMT (VAR (NAME("retval"))))
	))
	(PROC_DECL (NAME("Max") 
		(PARAMFIELD_DECL (NAME("a") TYPE(INT)))
		(PARAMFIELD_DECL (NAME("b") TYPE(INT))) TYPE(INT) 
		(VAR_DECL (NAME("res") TYPE(INT) NULL))

		(IF_STMT (COND(BINARY_EXP ((VAR (NAME("a"))) > (VAR (NAME("b")))))
			THEN(
				(ASSIGN_STMT (VAR (NAME("res"))) (VAR (NAME("a"))))
			)
			ELSE(
				(ASSIGN_STMT (VAR (NAME("res"))) (VAR (NAME("b"))))
			)		))
		(RETURN_STMT (VAR (NAME("res"))))
	))
	(PROC_DECL (NAME("printCmplx") 
		(PARAMFIELD_DECL (NAME("pr") TYPE(Complex))) NULL NULL
		(CALL_STMT (NAME("printstr") ARGS((LITERAL (STRING "Real ")))))
		(CALL_STMT (NAME("printfloat") ARGS((VAR ((VAR (NAME("pr"))) NAME("Real"))))))
		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "")))))
		(CALL_STMT (NAME("printstr") ARGS((LITERAL (STRING "Imag ")))))
		(CALL_STMT (NAME("printfloat") ARGS((VAR ((VAR (NAME("pr"))) NAME("Imag"))))))
		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "")))))
	))
	(PROC_DECL (NAME("test") NULL NULL 
		(VAR_DECL (NAME("c1") TYPE(Complex) NULL))
		(VAR_DECL (NAME("c2") TYPE(Complex) NULL))
		(VAR_DECL (NAME("cAdd") TYPE(Complex) NULL))
		(VAR_DECL (NAME("x") TYPE(INT) NULL))
		(VAR_DECL (NAME("y") TYPE(INT) NULL))
		(VAR_DECL (NAME("max") TYPE(INT) NULL))

		(ASSIGN_STMT (VAR (NAME("c1"))) (NEW_EXP (NAME("Complex"))))
		(ASSIGN_STMT (VAR (NAME("c2"))) (NEW_EXP (NAME("Complex"))))
		(ASSIGN_STMT (VAR ((VAR (NAME("c1"))) NAME("Real"))) (LITERAL (INT 1)))
		(ASSIGN_STMT (VAR ((VAR (NAME("c1"))) NAME("Imag"))) (LITERAL (INT 2)))
		(ASSIGN_STMT (VAR ((VAR (NAME("c2"))) NAME("Real"))) (LITERAL (INT 3)))
		(ASSIGN_STMT (VAR ((VAR (NAME("c2"))) NAME("Imag"))) (LITERAL (INT 4)))
		(CALL_STMT (NAME("printCmplx") ARGS((CALL_STMT (NAME("Add") ARGS((VAR (NAME("c1")))(VAR (NAME("c2")))))))))
		(ASSIGN_STMT (VAR (NAME("x"))) (LITERAL (INT 3)))
		(ASSIGN_STMT (VAR (NAME("y"))) (LITERAL (INT 7)))
		(ASSIGN_STMT (VAR (NAME("max"))) (CALL_STMT (NAME("Max") ARGS((VAR (NAME("y")))(VAR (NAME("x")))))))
	))
	(PROC_DECL (NAME("printStr") 
		(PARAMFIELD_DECL (NAME("str") TYPE(STRING))) NULL NULL
		(CALL_STMT (NAME("printstr") ARGS((VAR (NAME("str"))))))
	))
	(PROC_DECL (NAME("inOutTest") NULL NULL 
		(VAR_DECL (NAME("v1") TYPE(INT) NULL))
		(VAR_DECL (NAME("v2") TYPE(INT) NULL))

		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "skriv v1")))))
		(ASSIGN_STMT (VAR (NAME("v1"))) (CALL_STMT (NAME("readint") )))
		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "skriv v2")))))
		(ASSIGN_STMT (VAR (NAME("v2"))) (CALL_STMT (NAME("readint") )))
		(CALL_STMT (NAME("printstr") ARGS((LITERAL (STRING "Storst ")))))
		(CALL_STMT (NAME("printint") ARGS((CALL_STMT (NAME("Max") ARGS((VAR (NAME("v1")))(VAR (NAME("v2")))))))))
		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "")))))
	))
	(PROC_DECL (NAME("main") NULL NULL 
		(VAR_DECL (NAME("num") TYPE(FLOAT) NULL))
		(VAR_DECL (NAME("num2") TYPE(INT) NULL))
		(VAR_DECL (NAME("navn") TYPE(STRING) NULL))

		(ASSIGN_STMT (VAR (NAME("num"))) (LITERAL (FLOAT 6.48074)))
		(CALL_STMT (NAME("printfloat") ARGS((VAR (NAME("num"))))))
		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "")))))
		(ASSIGN_STMT (VAR (NAME("num2"))) (LITERAL (INT 7)))
		(CALL_STMT (NAME("printint") ARGS((VAR (NAME("num2"))))))
		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "")))))
		(ASSIGN_STMT (VAR (NAME("navn"))) (LITERAL (STRING "TestNavn")))
		(CALL_STMT (NAME("printStr") ARGS((VAR (NAME("navn"))))))
		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "")))))
		(CALL_STMT (NAME("test") ))
		(CALL_STMT (NAME("inOutTest") ))
		(ASSIGN_STMT (VAR (NAME("dummy"))) (NEW_EXP (NAME("Complex"))))
		(ASSIGN_STMT (VAR ((VAR (NAME("dummy"))) NAME("Real"))) (LITERAL (FLOAT 1.0)))
		(ASSIGN_STMT (VAR ((VAR (NAME("dummy"))) NAME("Imag"))) (LITERAL (FLOAT 2.0)))
		(CALL_STMT (NAME("printCmplx") ARGS((VAR (NAME("dummy"))))))
		(CALL_STMT (NAME("printline") ARGS((LITERAL (STRING "DONE")))))
	))
)